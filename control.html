<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="utf-8">
	<title>SpeechJammer.net</title>
</head>
<body>
	<p>
	<button type="button" onClick="emit_on()" style='font-size:128px;font-weight:bold;'>
	ON
	</button>
	</p>
	<p>
	<button type="button" onClick="emit_off()" style='font-size:128px;font-weight:bold;'>
	OFF
	</button>
	</p>
	<p>
	<button type="button" onClick="emit_duration()" style='font-size:128px;font-weight:bold;'>
	FIRE!
	</button>
	</p>
	<div id="yt" style = "height: 100%;"></div>
	<div id="dl" style = "height: 100%;"></div>
	<script src="jquery.min.js"></script>
	<script src="/socket.io/socket.io.js"></script>
	<script>
		var delay=false;
		$(function(){
			var socket = io.connect();
			socket.on('delay_status', function (msg) {
				//console.log(msg);
				delay = msg;
				update();
			});
			socket.on('delay_duration', function (millisec) {
				//console.log(msg);
				delay = true;
				update();
				setTimeout(function(){
					delay = false;
					update();
				},millisec);
			});
			update();
		});
		function update(){
			if(!delay) {
				console.log("delay off");
				var targetNode = document.getElementById('dl');
				targetNode.innerHTML = '<p>delay_off</p>';            
			} else{
				console.log("delay on");
				var targetNode = document.getElementById('dl');
				targetNode.innerHTML = '<p>delay_on</p>';            
			}
		}

		function emit_on(){      
			var targetNode = document.getElementById('yt');
            targetNode.innerHTML = '<iframe style="width:100%;height:100%;" src="./delay_on" frameborder="0" allowfullscreen></iframe>';            
		}
		function emit_off(){      
			var targetNode = document.getElementById('yt');
            targetNode.innerHTML = '<iframe style="width:100%;height:100%;" src="./delay_off" frameborder="0" allowfullscreen></iframe>';            
		}
		function emit_duration(){      
			var targetNode = document.getElementById('yt');
            targetNode.innerHTML = '<iframe style="width:100%;height:100%;" src="./delay_5000" frameborder="0" allowfullscreen></iframe>';            
		}
	</script>
</body>
</html>
